<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>TODO</title>

	<link rel="stylesheet" href="assets/main.css">

	<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			tex2jax: { inlineMath: [['$','$']] }
		});
	</script>

	<script src="http://code.jquery.com/jquery-2.0.2.min.js"></script>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="assets/js/graph.js"></script>
	<script src="assets/js/strategy-a.js"></script>
	<script src="assets/js/strategy-b.js"></script>
	<script src="assets/js/strategy-c.js"></script>
	<script src="assets/js/strategy-d.js"></script>
</head>
<body>
	<article class="container">
		
		<header class="title">
			<h1>Microsimulation and Traffic Flow Analysis at Roundabouts and Traffic Lights</h1>
			<p class="authors">Jakub Jurových, Peter Sandtner, Obligatory Asian Dude</p>
		</header>

		
		<section class="abstract">
			<p>We use a cellular automaton model to simulate 3 types of intersections - (1) simple roundabout, (2) roundabout with quick right turn and (3) basic traffic lights.</p>
			<p>We analyze the traffic flow dynamics of each intersections, finding bounds of their optimal use cases. We compare these traffic control systems in terms of their efficiency at usual traffic flow metrics such as <em>average time spent in the intersection</em> and <em>intersection throughput</em>.</p>
			<p>The model consists of 2 perpendicular roads each with 2 lanes (totaling 4 directions), intersection control system and homogenous agents representing cars.</p>
			<p>For this task we used NetLogo simulation software. Source code of our simulation is attached in the document.</p>
		</section>


		<section>
			<h2>Introduction</h2>

			<div class="columns">
				<p>During the past few decades we have seen a wide adoption of alternative traffic control schemes, especially roundabouts.</p>
				<p>Traffic management is becoming extremely complex due to overloaded communications and predicting the traffic flow cannot be considered reliable.</p>
				<p>A need for flexibility has lead to innovative traffic control mechanisms.</p>
				<p>With many possibilities in organization of vehicular traffic, it is important to understand basic principles of the intersections.</p>
				<p>Despite the promising results of roundabout scheme, we still encounter mostly traffic lights, which are typical for dense urban areas.
				<p>We set out to explore a very limited amount of these two traffic control mechanisms in simplified conditions.</p>
				<p>Our focus is solely on efficieny, not considering additional problems such as environmental impact or general safety.</p>
			</div>
		</section>


		<section>
			<h2>The Problem</h2>

			<div class="columns">
				<p>Traffic simulation can become highly complex, considering many factors such as acceleration, yield-of-way-rules and speed regulation.</p>
				<p>A general objective of keeping the traffic flow on a highest level possible might be misleading.</p>
				<p>Despite the symmetric nature of our targeted intersections, traffic flow from one direction can be effectively throttled by another road.</p>
				<p>Our objective is to analyze several traffic situations of various traffic loads and determine the best control scheme under these conditions.</p>
				<p>We try to understand the traffic flow limits of each of these situations.</p>
			</div>
		</section>


		<section>
			<h2>Construction of the Model</h2>

			<div class="columns">
				<figure>
					<img src="assets/images/patches.png" alt="">
					<figcaption>Distance between patches $|AB| = |AC| = |AD| = 1 m$</figcaption>
				</figure>
				<p>The simulated world consists of a grid of 120x120 patches. Travelling distance from a patch to all is neighbours represents 1 meter in the real world (see fig. 1).</p>
				<p>As a base for our computations, we consider the smallest discrete time interval (aka <em>tick</em>) to be <strong>1 second</strong> in the real world.</p>
				<p>Cars are homogenous agents, represented using NetLogo's <em>turtles</em>. Each turtle moves n patches over 1 second, where n is it's current speed.</p>
				<p>Turtles are allowed to move only on <em>road</em> patches. Each <em>road</em> patch has a static variable <em>priority</em> used for determining the right-of-way rules.</p>
				<p>Turtles are created on one of 4 <em>spawn</em> patches, each representing the one of the 4 possible inbound directions. Spawn patches can be considered as the input of the <em>outside world</em>.</p>
				<p>Spawns are operated independently, using probabilistic function for creating new turtles. In one tick, at the most only 1 turtle is created on 1 spawn.</p>
				<p>Probabilistic distribution ensures the random space and time gaps between 2 turtles coming from the same direction.</p>
				<p>Random space gaps generated by the probabilistic function represent the <strong>Poisson distribution</strong> of space gaps found in the real world situations<sup>[1]</sup>. <span class="todo">really? check the source</span></p>
			</div>

			<div>
				<h3>Movement of the Turtles</h3>
				<p>Upon the creation of the turtle, each one is assigned it's final direction using a uniform probabilistic function. Since some of our modeled control schemes do not allow U-turn (i.e. 180° change in car's direction), we disallow U-turns from all of our model situations.</p>
				<p>Therefore our model assumes distribution of 33/33/33 % for left/straight/right turns.</p>
				<p>The concept of turtle movement is based on a modified version of <em>Nagel–Schreckenberg model</em><sup>[citation needed]</sup>. In this model we are not considering the random decrease of speed of turtles.</p>
				<p>The outline of our movement model of the turtle can be represented in these steps, which occur on every tick $i$:</p>
				<ol>
					<li>
						<p><strong>Acceleration:</strong> Velocity $v_{t}$ of each turtle $t$ is increased by the acceleration $a = 1$. This represents the acceleration of $1 m/s^2$ in the real world. This is close to the real-world $1.4 m/s^2$ acceleration observed in our road tests.</p>
						<p>$v_{t}^{(i+1/2)} = v_{t}^{(i)} + a$</p>
						<p>Using a constant acceleration $a$, our model assumes uniform acceleration of a car accross the whole speed range.</p>
					</li>	
					<li>
						<p><strong>Slowdown and allocation:</strong> The velocity of the turtle is limited by:</p>
						<ul>
							<li>maximal speed $vmax_r$ of road $r$</li>
							<li>distance $d$ to the nearest obstacle (another turtle, field allocated by another turtle or stopping traffic light)</li>
						</ul>
						<p>$v_{t}^{(i+1)} = min\{v_{t}^{(i+1/2)}, vmax_r, d\}$</p>
						<p>Maximum speed of the road is fixed $14 m/s$, representing $\sim 50\ km/h$ in the real world.</p>
						<p>Due to the two-dimensional space (instead of just one-dimensional found in NS model) we need to introduce a process of patch allocation.</p>
						<p>The allocation process may introduce nondeterministic behaviour in two-dimensional space. To achieve a deterministic behavior, we need to execute the slowdown and allocation in an ordered manner. Turtles in this process are partially ordered using the priority of their current patch, which can be either $1$ (executed later) or $2$ (executed sooner).</p>
						<figure>
							<img src="assets/images/priorities.png" alt="">
							<figcaption>Black patches in our simulation represent high-priority road. Grey patches represent low-priority road.</figcaption>
						</figure>
						<p>Each turtle allocates fields on its own path.</p>
						<p>In the allocation process, turtle deterministically chooses the next patch accroding to its final direction. Patch in this direction is preferred over other patches which are preferred over patch with the opposite direction.</p>
						<p>Each turtle allocates at most $v_t^{i+1}*l$ patches.</p>
						<p>Allocation factor $l$ ensures that turtle yields the right of way if the second turtle is less than $l$ seconds away. In our model we use constant allocation factor $l = 3$.</p>
					</li>
					<li>
						<p><strong>Speed variation:</strong> This step in the original NS model represents the random slowdown of certain turtles. This event is not considered in our model.</p>
					</li>
					<li>
						<p><strong>Movement:</strong> Each turtle is moved $v_t^(i+1)along its allocated path.</p>
					</li>
				</ol>
				<p>&nbsp;</p>
			</div>

			<div>
				<h3>Intersections</h3>

				<h4>Classic Roundabout</h4>
				<div class="columns">
					<figure>
						<img src="assets/images/roundabout.png" alt="">
						<figcaption>Classic roundabout</figcaption>
					</figure>
					<p>A first traffic control mechanism analyzed in our model is roundabout.</p>
					<p>We compare roundabouts of various sizes, described by radius $r$ and lane gap $g = r/6$ illustrated in <em>figure 2</em>.
					<p>A turtle entering a roundabout randomly chooses it's exit according to the turtle's final direction.</p>
					<p>Possible routes of a car coming from the south are illustrated in <em>figure 2</em>. Please note the missing U-turn option.</p>
					<p>A car entering the roundabout yields the right of way when entering the roundabout at point <em>A</em>.</p>
					<p>The roundabout patches has higher priority than road patches with speed limited to $8 m/s = 28.8 km/h$.</p>
					<p>Maximum allowed speed of road patches outside the roundabout are limited is limited to $14 m/s = 50.4 km/h$.</p>
				</div>

				<h4>Roundabout with quick right turn</h4>
				<div class="columns">
					<figure>
						<img src="assets/images/roundabout-quick-right.png" alt="">
						<figcaption>Roundabout with quick right turn</figcaption>
					</figure>
					<p>Another modeled scheme is a Roundabout with a quick right turn. This is a variation of a Classic roundabout control scheme.</p>
					<p>In this model, a car with an intent of right turn does not enter roundabout at all. Instead, it uses separate road to decrease the load of the roundabout.</p>
					<p>Road metrics introduced in Classic roundabout also hold in this model. Radius of right turn $r_{outer}$ is 5 meters higher than roundabout radius $r_{inner}$.</p>
					<p>$r_{outer} = r_{inner} + 5$</p>
				</div>

				<h4>Traffic lights</h4>
				<div class="columns">
					<figure>
						<img src="assets/images/traffic-lights.png" alt="">
						<figcaption>Fixed interval traffic lights</figcaption>
					</figure>
					<p>We have chosen Traffic Lights with fixed interval to be the last modeled scheme in this project.</p>
					<p>Car waits on point A in <em>figure 3</em> until there is a green light for its direction.</p>
					<p>Traffic lights interval consists of green-light length and orange-light length.</p>
					<p>Our model suffers from deadlock of turtles under certain conditions (e.g. high traffic flow combined with long switch interval).</p>
					<p>In our model, green lights lasts for 40 seconds and orange light for 10 seconds.</p>
					<p>Lane gap is fixed on $g = 8$.</p>
					<p>Maximum allowed speed on all patches is $14 m/s = 50.4 km/h$.</p>
				</div>

			</div>
		</section>

		<section>
			<h2>Analysis</h2>
			<h3>Strategy 25/25/25/25</h3>
			<div id="graph-a">
				<div>
			        <input class="slider" type="range" min="1" max="26" step="1" width="300" value="1">
			        North: <span class="north"></span>
			        East: <span class="east"></span>
			        South: <span class="south"></span>
			        West: <span class="west"></span>
			    </div>
			</div>
			<script type="text/javascript">
				renderGraph(strategyA, "#graph-a");
			</script>
			<h3>Strategy 40/10/40/10</h3>
			<div id="graph-b">
				<div>
			        <input class="slider" type="range" min="1" max="10" step="1" width="300" value="1">
			        North: <span class="north"></span>
			        East: <span class="east"></span>
			        South: <span class="south"></span>
			        West: <span class="west"></span>
			    </div>
			</div>
			<script type="text/javascript">
				renderGraph(strategyB, "#graph-b");
			</script>
			<h3>Strategy 40/40/10/10</h3>
			<div id="graph-c">
				<div>
			        <input class="slider" type="range" min="1" max="10" step="1" width="300" value="1">
			        North: <span class="north"></span>
			        East: <span class="east"></span>
			        South: <span class="south"></span>
			        West: <span class="west"></span>
			    </div>
			</div>
			<script type="text/javascript">
				renderGraph(strategyC, "#graph-c");
			</script>
			<h3>Strategy 40/30/20/10</h3>
			<div id="graph-d">
				<div>
			        <input class="slider" type="range" min="1" max="10" step="1" width="300" value="1">
			        North: <span class="north"></span>
			        East: <span class="east"></span>
			        South: <span class="south"></span>
			        West: <span class="west"></span>
			    </div>
			</div>
			<script type="text/javascript">
				renderGraph(strategyD, "#graph-d");
			</script>
		</section>

		<section>
			<h2>Summary</h2>
			<p>While many optimizations are possible, they come at price of decreased flexibility. NetLogo's inexpressible syntax and lack of advanced data structures</p>
		</section>

		<section>
			<h2>Limits of the model and possible extensions</h2>

			<div class="columns">
				<p>Modeling under realistic conditions can quickly become extremely complex.</p>
				<p>We needed to simplify our model in such ways that diverge from the real world as little as possible while maintaning flexibility and performance of our models.</p>
				<p>Even though traffic rules are complex and differ in some countries, they are mostly deterministic. Drivers, on the other hand, may act unpredictably and heterogenously under certain conditions.</p>
				<p>A possibility of traffic accidents has not been considered in our model. In the real world, slightly less effective control scheme may result in more robust system, prone to the accidents and other unpredictable situations.</p>
				<p>In the real world, control system may even be limited by the space. This might be the reason why in the dense urban environment with grid layout we see almost exclusively only traffic lights.</p>
				<p>Another possible extension is to include pedestrians into our model. According to the 1994 before-and-after study conducted in Netherlands<sup>4</sup>, roundabouts result in 89% less pedestrian injuries. In roundabouts, greater safety is achieved through artificial obstacle, i.e. central island, effectively lowering speed of the vehicles<sup>5</sup>.</p>
				<p>Other possible extensions include environmental impact, aesthetics and building costs.</p>
			</div>
		</section>

		<section>
			<h2>Sources</h2>
			<ol>
				<li>http://ntl.bts.gov/lib/26000/26800/26814/USE_OF_POISSON_DISTRIBUTION_IN_HIGHWAY_TRAFFIC.PDF</li>
				<li>http://en.wikipedia.org/wiki/Nagel-Schreckenberg_model</li>
				<li>http://arxiv.org/pdf/cond-mat/0309560v2.pdf</li>
				<li>Schoon, C., and J. van Minnen, "The Safety of Roundabouts in the Netherlands," SWOV Institute for Road Safety Research, Traffic Engineering and Control (March 1994).</li>
				<li>http://onlinepubs.trb.org/Onlinepubs/nchrp/nchrp_syn_264.pdf</li>
			</ol>
		</section>

		<section>
			<h2>Used libraries</h2>
			<ol>
				<li>http://www.mathjax.org/</li>
				<li>http://d3js.org/</li>
				<li>Graphs based on Parallel Coordinates example http://mbostock.github.io/d3/talk/20111116/iris-parallel.html</li>
			</ol>
		</section>

	</article>
</body>
</html>